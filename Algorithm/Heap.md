
# 🗂️ **자료구조: 큐(Queue) & 힙(Heap)**

📅 **2025.08.21 목**

-----

## 🌊 **너비 우선 탐색 (BFS: Breadth-First Search)**

> 시작점에서 가장 가까운 노드부터 순서대로, 물결이 퍼져나가듯 탐색하는 알고리즘. **최단 경로**를 찾는 문제의 단골 풀이법이다.

### **핵심: 왜 큐(Queue)를 사용할까?**

BFS의 레벨 순회 탐색은 **선입선출(FIFO)** 구조인 **큐(Queue)** 덕분에 가능함.

  - **동작 원리**: 가장 먼저 발견된 노드(즉, 가장 가까운 노드)를 먼저 탐색해야 레벨 순서가 지켜진다. 따라서 발견 순서대로 큐에 넣고, 가장 먼저 들어온 순서대로 꺼내 써야 순서가 꼬이지 않는다.

### **탐색 과정 정리**

1.  **초기화**: 시작 노드 `v`를 큐에 삽입하고, **방문 처리**를 먼저 해준다.
2.  **반복**: 큐가 빌 때까지 아래 과정을 계속 돌린다.
      - **추출**: 큐에서 노드 `t`를 하나 꺼낸다.
      - **탐색 및 삽입**: `t`와 연결된 모든 노드를 보면서, **아직 방문 안 한** 노드가 있다면 전부 큐에 넣고 **방문 처리**를 해버린다.

-----

## 🏗️ **우선순위 큐 & 힙 (Heap)**

> 데이터를 단순히 들어온 순서가 아닌, 설정된 **우선순위**에 따라 처리하는 자료구조. 보통 \*\*힙(Heap)\*\*으로 구현하는 게 가장 효율적이다.

### **Python `heapq` 모듈 활용법**

파이썬의 `heapq`는 기본적으로 \*\*최소 힙(Min Heap)\*\*을 지원함.

  - **최소 힙**: 가장 **작은** 값이 항상 최상단에 위치. `heappop()`하면 제일 작은 값이 나온다.
    ```python
    import heapq
    pq = [4, 1, 7]
    heapq.heapify(pq) # 리스트를 바로 힙으로 만들어 줌

    heapq.heappush(pq, 2) # [1, 2, 7, 4] 형태의 힙이 됨
    smallest = heapq.heappop(pq) # 가장 작은 1이 나옴
    ```

### **최대 힙 (Max Heap) 구현 아이디어**

> `heapq`는 최소 힙만 지원하지만, 간단한 트릭으로 최대 힙을 만들 수 있다. 핵심은 **값의 부호를 뒤집어** 우선순위를 반전시키는 것.

  - **구현 방법**:
    1.  **삽입(Push)**: 저장할 값에 \*\*음수 부호(-)\*\*를 붙여서 힙에 넣는다. (ex: `5`는 `-5`로)
    2.  **추출(Pop)**: 힙에서 나온 값(가장 작은 음수)에 다시 \*\*음수 부호(-)\*\*를 붙여 원래 값(가장 큰 양수)으로 되돌린다.
    <!-- end list -->
    ```python
    # 최대 힙 예시
    max_pq = []
    heapq.heappush(max_pq, -5) 
    heapq.heappush(max_pq, -2) 

    largest = -heapq.heappop(max_pq) # -5가 나와서, -를 붙이니 5가 됨
    ```

### **다중조건 힙 (Multi-condition Heap)**

  - **구현 방법**: 우선순위 기준이 여러 개라면 \*\*튜플(Tuple)\*\*로 묶어서 넣으면 끝.
  - **동작 원리**: 파이썬이 튜플을 비교할 때 0번 인덱스부터 차례대로 비교하는 규칙을 그대로 이용하는 것.
    ```python
    # (거리, 노드번호) -> 거리가 우선, 같으면 노드번호 순
    multi_pq = []
    heapq.heappush(multi_pq, (10, 5)) 
    heapq.heappush(multi_pq, (5, 3))  
    heapq.heappush(multi_pq, (5, 8))  

    # 나오는 순서: (5, 3) -> (5, 8) -> (10, 5)
    ```

-----

## ✅ **오늘의 핵심 요약**

  - **BFS**: \*\*큐(Queue)\*\*를 쓰는 너비 탐색. **최단거리**가 키워드.
  - **힙(Heap)**: **우선순위 큐** 구현체. `heapq`는 **최소 힙**이 기본.
  - **최대 힙**: **음수 부호** 트릭, 이거 모르면 손해.
  - **다중 조건**: **튜플**로 묶어 넣으면 파이썬이 알아서 정렬해준다.

-----

## 💡 **오늘의 깨달음: `print()` 디버깅**

> 디버거로도 잡기 힘든 오류를 만났을 때, 원시적이지만 가장 확실한 방법이 있다.

  - **언제 쓸까?**: 복잡한 반복문, 재귀 호출처럼 변수가 어떻게 변하는지, 코드가 어디를 타는지 흐름을 놓쳤을 때.
  - **어떻게 쓸까?**: 의심되는 부분의 시작과 끝, 변수가 바뀌는 지점마다 `print()`를 찍어서 실제 값이 어떻게 변하는지 눈으로 직접 추적하는 것.
  - **왜 좋을까?**: 복잡한 설정 없이도 코드의 실제 실행 흐름을 가장 직관적으로 보여줌. 내가 생각한 흐름과 뭐가 다른지 바로 알 수 있다.
